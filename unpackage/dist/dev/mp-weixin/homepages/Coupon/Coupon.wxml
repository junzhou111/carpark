<view class="Coupon"><u-popup vue-id="5fcb28c2-1" show="{{newaddshow}}" mode="top" data-event-opts="{{[['^close',[['newaddclose']]],['^open',[['newaddopen']]]]}}" bind:close="__e" bind:open="__e" bind:__l="__l" vue-slots="{{['default']}}"><view class="fromview"><scroll-view scroll-y="true"><view class="scrollbox"><block wx:if="{{giveCoupontype}}"><input class="calendarinput" type="text" placeholder="商家名称" data-event-opts="{{[['input',[['__set_model',['','MerchantName','$event',[]]],['changeValue',['$event']]]]]}}" value="{{MerchantName}}" bindinput="__e"/></block><scroll-view scroll-y="true"><block wx:if="{{giveCoupontype}}"><view class="MerchantNamebox"><block wx:for="{{MerchantNamelist}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view data-event-opts="{{[['tap',[['changeMerchantName',['$0'],[[['MerchantNamelist','',index]]]]]]]}}" class="MerchantNamebox-item" bindtap="__e"><text>{{item.name}}</text><text>{{item.type==0?'业主/车主':item.type==1?'家属':item.type==2?'租户':item.type==3?'工作人员':'APP注册用户'}}</text></view></block></view></block></scroll-view><u-action-sheet vue-id="{{('5fcb28c2-2')+','+('5fcb28c2-1')}}" actions="{{CouponType.list}}" title="{{CouponType.title}}" cancelText="取消" show="{{CouponType.show}}" data-event-opts="{{[['^select',[['CouponTypeClick']]],['^close',[['e0']]]]}}" bind:select="__e" bind:close="__e" bind:__l="__l"></u-action-sheet><view data-event-opts="{{[['tap',[['e1',['$event']]]]]}}" class="calendarinput" bindtap="__e"><text>{{CouponType.value}}</text><u-icon vue-id="{{('5fcb28c2-3')+','+('5fcb28c2-1')}}" size="20" name="arrow-down" bind:__l="__l"></u-icon></view><u-datetime-picker class="vue-ref" vue-id="{{('5fcb28c2-4')+','+('5fcb28c2-1')}}" show="{{startshow}}" mode="datetime" data-ref="datetimePicker" value="{{startvalue}}" data-event-opts="{{[['^close',[['e2']]],['^cancel',[['e3']]],['^confirm',[['startconfirm']]],['^input',[['__set_model',['','startvalue','$event',[]]]]]]}}" bind:close="__e" bind:cancel="__e" bind:confirm="__e" bind:input="__e" bind:__l="__l"></u-datetime-picker><view data-event-opts="{{[['tap',[['e4',['$event']]]]]}}" class="calendarinput" bindtap="__e"><text>{{startvalues}}</text><u-icon vue-id="{{('5fcb28c2-5')+','+('5fcb28c2-1')}}" size="25" name="calendar" bind:__l="__l"></u-icon></view><u-datetime-picker class="vue-ref" vue-id="{{('5fcb28c2-6')+','+('5fcb28c2-1')}}" show="{{endshow}}" mode="datetime" data-ref="enddatetimePicker" value="{{endvalue}}" data-event-opts="{{[['^close',[['e5']]],['^cancel',[['e6']]],['^confirm',[['endconfirm']]],['^input',[['__set_model',['','endvalue','$event',[]]]]]]}}" bind:close="__e" bind:cancel="__e" bind:confirm="__e" bind:input="__e" bind:__l="__l"></u-datetime-picker><view data-event-opts="{{[['tap',[['e7',['$event']]]]]}}" class="calendarinput" bindtap="__e"><text>{{endvalues}}</text><u-icon vue-id="{{('5fcb28c2-7')+','+('5fcb28c2-1')}}" size="25" name="calendar" bind:__l="__l"></u-icon></view><u-action-sheet vue-id="{{('5fcb28c2-8')+','+('5fcb28c2-1')}}" actions="{{Restrictiontype.list}}" title="{{Restrictiontype.title}}" cancelText="取消" show="{{Restrictiontype.show}}" data-event-opts="{{[['^select',[['RestrictiontypeClick']]],['^close',[['e8']]]]}}" bind:select="__e" bind:close="__e" bind:__l="__l"></u-action-sheet><view data-event-opts="{{[['tap',[['e9',['$event']]]]]}}" class="calendarinput" bindtap="__e"><text>{{Restrictiontype.value}}</text><u-icon vue-id="{{('5fcb28c2-9')+','+('5fcb28c2-1')}}" size="20" name="arrow-down" bind:__l="__l"></u-icon></view><input class="calendarinput" type="text" placeholder="优惠券名称" data-event-opts="{{[['input',[['__set_model',['','CouponName','$event',[]]]]]]}}" value="{{CouponName}}" bindinput="__e"/><block wx:if="{{CouponType.type!=0}}"><input class="calendarinput" type="text" placeholder="优惠值" data-event-opts="{{[['input',[['__set_model',['','Discountvalue','$event',[]]]]]]}}" value="{{Discountvalue}}" bindinput="__e"/></block><u-action-sheet vue-id="{{('5fcb28c2-10')+','+('5fcb28c2-1')}}" actions="{{recovery.list}}" title="{{recovery.title}}" cancelText="取消" show="{{recovery.show}}" data-event-opts="{{[['^select',[['recoveryClick']]],['^close',[['e10']]]]}}" bind:select="__e" bind:close="__e" bind:__l="__l"></u-action-sheet><view data-event-opts="{{[['tap',[['e11',['$event']]]]]}}" class="calendarinput" bindtap="__e"><text>{{recovery.value}}</text><u-icon vue-id="{{('5fcb28c2-11')+','+('5fcb28c2-1')}}" size="20" name="arrow-down" bind:__l="__l"></u-icon></view><u-action-sheet vue-id="{{('5fcb28c2-12')+','+('5fcb28c2-1')}}" actions="{{Effectiveduration.list}}" title="{{Effectiveduration.title}}" cancelText="取消" show="{{Effectiveduration.show}}" data-event-opts="{{[['^select',[['EffectivedurationClick']]],['^close',[['e12']]]]}}" bind:select="__e" bind:close="__e" bind:__l="__l"></u-action-sheet><view data-event-opts="{{[['tap',[['e13',['$event']]]]]}}" class="calendarinput" bindtap="__e"><text>{{Effectiveduration.value}}</text><u-icon vue-id="{{('5fcb28c2-13')+','+('5fcb28c2-1')}}" size="20" name="arrow-down" bind:__l="__l"></u-icon></view><block wx:if="{{Effectiveduration.type==1}}"><input class="calendarinput" type="text" placeholder="固定时间(小时/单位)" data-event-opts="{{[['input',[['__set_model',['','timevalue','$event',[]]]]]]}}" value="{{timevalue}}" bindinput="__e"/></block><input class="calendarinput" type="text" placeholder="优惠券数量" data-event-opts="{{[['input',[['__set_model',['','Couponnumber','$event',[]]]]]]}}" value="{{Couponnumber}}" bindinput="__e"/><block wx:if="{{giveCoupontype}}"><button data-event-opts="{{[['tap',[['confirm',['$event']]]]]}}" class="confirmbtn" bindtap="__e">添加确认</button></block><block wx:if="{{!giveCoupontype}}"><button data-event-opts="{{[['tap',[['editconfirm',['$event']]]]]}}" class="confirmbtn" bindtap="__e">编辑确认</button></block></view></scroll-view></view></u-popup><view class="inputbox"><view class="input"><u--input bind:input="__e" vue-id="5fcb28c2-14" adjustPosition="{{true}}" placeholder="搜索" prefixIcon="search" prefixIconStyle="font-size: 22px;color: #909399" value="{{searchvalue}}" data-event-opts="{{[['^input',[['__set_model',['','searchvalue','$event',[]]]]]]}}" bind:__l="__l"></u--input></view><view class="inputbtn"><button data-event-opts="{{[['tap',[['addcouponbtn',['$event']]]]]}}" class="bt" bindtap="__e">新增</button><button data-event-opts="{{[['tap',[['search',['$event']]]]]}}" class="bt" bindtap="__e">搜索</button><button data-event-opts="{{[['tap',[['reset',['$event']]]]]}}" class="bt" bindtap="__e">重置</button></view></view><u-popup vue-id="5fcb28c2-15" show="{{giveCouponshow}}" mode="top" data-event-opts="{{[['^close',[['e14']]]]}}" bind:close="__e" bind:__l="__l" vue-slots="{{['default']}}"><view class="fromview"><input class="calendarinput" type="text" placeholder="车牌" data-event-opts="{{[['input',[['__set_model',['','carplate','$event',[]]]]]]}}" value="{{carplate}}" bindinput="__e"/><u-datetime-picker class="vue-ref" vue-id="{{('5fcb28c2-16')+','+('5fcb28c2-15')}}" show="{{giveCouponstartshow}}" mode="datetime" data-ref="giveCoupondatetimePicker" value="{{giveCouponstartvalue}}" data-event-opts="{{[['^close',[['e15']]],['^cancel',[['e16']]],['^confirm',[['giveCouponstartconfirm']]],['^input',[['__set_model',['','giveCouponstartvalue','$event',[]]]]]]}}" bind:close="__e" bind:cancel="__e" bind:confirm="__e" bind:input="__e" bind:__l="__l"></u-datetime-picker><block wx:if="{{giveCouponstartendshow}}"><view data-event-opts="{{[['tap',[['e17',['$event']]]]]}}" class="calendarinput" bindtap="__e"><text>{{givestartvalue}}</text><u-icon vue-id="{{('5fcb28c2-17')+','+('5fcb28c2-15')}}" size="25" name="calendar" bind:__l="__l"></u-icon></view></block><u-datetime-picker class="vue-ref" vue-id="{{('5fcb28c2-18')+','+('5fcb28c2-15')}}" show="{{giveCouponendshow}}" mode="datetime" data-ref="giveCouponenddatetimePicker" value="{{giveCouponendvalue}}" data-event-opts="{{[['^close',[['e18']]],['^cancel',[['e19']]],['^confirm',[['giveCouponendconfirm']]],['^input',[['__set_model',['','giveCouponendvalue','$event',[]]]]]]}}" bind:close="__e" bind:cancel="__e" bind:confirm="__e" bind:input="__e" bind:__l="__l"></u-datetime-picker><block wx:if="{{giveCouponstartendshow}}"><view data-event-opts="{{[['tap',[['e20',['$event']]]]]}}" class="calendarinput" bindtap="__e"><text>{{giveendvalue}}</text><u-icon vue-id="{{('5fcb28c2-19')+','+('5fcb28c2-15')}}" size="25" name="calendar" bind:__l="__l"></u-icon></view></block><input class="calendarinput" type="text" placeholder="姓名(非必填)" data-event-opts="{{[['input',[['__set_model',['','uname','$event',[]]]]]]}}" value="{{uname}}" bindinput="__e"/><input class="calendarinput" type="text" placeholder="手机号(非必填)" data-event-opts="{{[['input',[['__set_model',['','uphone','$event',[]]]]]]}}" value="{{uphone}}" bindinput="__e"/><button data-event-opts="{{[['tap',[['giveCouponconfirm',['$event']]]]]}}" class="confirmbtn" bindtap="__e">确认</button></view></u-popup><view class="CouponList"><block wx:for="{{coupondata}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view class="CouponList-item"><view class="header"><view class="Merchantname">{{'商家名称：'+item.p_name+''}}</view><view class="Couponname">{{'优惠券名称：'+item.name+''}}</view></view><view class="neck"><view class="Couponprice">{{'优惠值：'+item.discounts_rules+''}}</view><view class="repeattype">是否重复使用：</view></view><view class="time"><view class="statetime"><text>{{item.start_effective_time+"---"+item.end_effective_time}}</text></view></view><view class="allnumber"><view class="number">{{'发放数量：'+item.amount+''}}</view><view class="invalidnumber">无效数量：</view></view><view class="attributenumber"><view class="Usednumber">已使用数量：</view><view class="notusednumber">未使用数量：</view></view><view class="footer"><view class="Coupontype">{{'优惠券类型：'+(item.discounts_type=="0"?'免费':item.discounts_type=="1"?'定值':item.discounts_type=="2"?'打折':'金额充值')+''}}</view><view class="type">状态：</view></view><view class="btns"><text data-event-opts="{{[['tap',[['Couponedit',['$0'],[[['coupondata','',index]]]]]]]}}" bindtap="__e">编辑</text><text data-event-opts="{{[['tap',[['giveCoupon',['$0'],[[['coupondata','',index]]]]]]]}}" bindtap="__e">发放</text><text data-event-opts="{{[['tap',[['giveCouponrecord',['$0'],[[['coupondata','',index]]]]]]]}}" bindtap="__e">发放记录</text><block wx:if="{{item.time_type!=0}}"><text data-event-opts="{{[['tap',[['changecode',['$0'],[[['coupondata','',index]]]]]]]}}" bindtap="__e">二维码</text></block><text data-event-opts="{{[['tap',[['del',['$0'],[[['coupondata','',index]]]]]]]}}" bindtap="__e">删除</text></view></view></block></view><u-modal vue-id="5fcb28c2-20" show="{{delModal.show}}" title="{{delModal.title}}" content="{{delModal.content}}" width="200px" showCancelButton="true" data-event-opts="{{[['^cancel',[['e21']]],['^confirm',[['confirmdel']]]]}}" bind:cancel="__e" bind:confirm="__e" bind:__l="__l"></u-modal></view>