(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["homepages/MonthlyfeeparkspaceManagement/AddMonthlyfeeparkspace"],{303:function(e,t,n){"use strict";(function(e,t){var a=n(4);n(26);a(n(25));var r=a(n(304));e.__webpack_require_UNI_MP_PLUGIN__=n,t(r.default)}).call(this,n(1)["default"],n(2)["createPage"])},304:function(e,t,n){"use strict";n.r(t);var a=n(305),r=n(307);for(var i in r)["default"].indexOf(i)<0&&function(e){n.d(t,e,(function(){return r[e]}))}(i);n(309);var o,s=n(32),c=Object(s["default"])(r["default"],a["render"],a["staticRenderFns"],!1,null,null,null,!1,a["components"],o);c.options.__file="homepages/MonthlyfeeparkspaceManagement/AddMonthlyfeeparkspace.vue",t["default"]=c.exports},305:function(e,t,n){"use strict";n.r(t);var a=n(306);n.d(t,"render",(function(){return a["render"]})),n.d(t,"staticRenderFns",(function(){return a["staticRenderFns"]})),n.d(t,"recyclableRender",(function(){return a["recyclableRender"]})),n.d(t,"components",(function(){return a["components"]}))},306:function(e,t,n){"use strict";var a;n.r(t),n.d(t,"render",(function(){return r})),n.d(t,"staticRenderFns",(function(){return o})),n.d(t,"recyclableRender",(function(){return i})),n.d(t,"components",(function(){return a}));try{a={uPicker:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-picker/u-picker")]).then(n.bind(null,393))},uIcon:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-icon/u-icon")]).then(n.bind(null,366))},uCalendar:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-calendar/u-calendar")]).then(n.bind(null,447))}}}catch(s){if(-1===s.message.indexOf("Cannot find module")||-1===s.message.indexOf(".vue"))throw s;console.error(s.message),console.error("1. 排查组件名称拼写是否正确"),console.error("2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom"),console.error("3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件")}var r=function(){var e=this,t=e.$createElement;e._self._c;e._isMounted||(e.e0=function(t){e.cars.show=!1},e.e1=function(t){e.cars.show=!1},e.e2=function(t){e.cars.show=!0},e.e3=function(t){e.addstartrangeshow=!0},e.e4=function(t){e.addendrangeshow=!0},e.e5=function(t){e.cars.show=!1},e.e6=function(t){e.cars.show=!1},e.e7=function(t){e.cars.show=!0})},i=!1,o=[];r._withStripped=!0},307:function(e,t,n){"use strict";n.r(t);var a=n(308),r=n.n(a);for(var i in a)["default"].indexOf(i)<0&&function(e){n.d(t,e,(function(){return a[e]}))}(i);t["default"]=r.a},308:function(e,t,n){"use strict";(function(e){var a=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(55)),i=a(n(57)),o=n(166),s={data:function(){return{radioitem:[{value:"Monthlyfee",name:"月费配置",checked:!0},{value:"flexible",name:"灵活配置",checked:!1}],monthspayment:"缴费几个月",licenseplate:"车牌",cars:{title:"车辆类型",list:[["未知车牌","蓝牌小汽车","黑牌小汽车","单排黄牌","双排黄牌","警车车牌","武警车牌","个性化车牌","单排军车牌","双排军车牌","使馆车牌","香港车牌","农用车牌","澳门牌","厂内牌","民航牌","领事馆车牌","新能源车牌","应急车牌"]],show:!1,value:"车辆类型",index:"all",type:""},Carowner:"车主",phone:"手机号",ids:"身份证",addstartrangeshow:!1,addstartrangevalue:"开始时间",addendrangeshow:!1,addendrangevalue:"结束时间",spaceId:"",parentId:"",spacePrice:{},cartype:"",Price:"",moonPrice:"",money:"",edittype:"",edit:""}},onLoad:function(e){if(console.log("space_id, parent_id",e),this.spaceId=e.space_id,this.parentId=e.parent_id,this.cartype=e.type,console.log(this.spaceId,"spaceId"),console.log(this.parentId,"parentId"),console.log(this.cartype,"cartype"),"true"==e.edittype){this.edittype=e.edittype;var t=JSON.parse(e.item);this.edit=t.id,console.log(t,"iditem"),this.licenseplate=t.carscan,this.cars.type=t.carty,this.cars.value=this.cars.list[0][t.carty],this.Carowner=t.name,this.phone=t.phone,this.ids=t.idcard,this.addstartrangevalue=t.start,this.addendrangevalue=t.end,this.spaceId=t.space_id,this.parentId=t.space_parent_id,this.cartype=t.space_type}this.getcarPrice()},methods:{change:function(e){console.log("index",e),0==e&&(this.radioitem[0].checked=!0,this.radioitem[1].checked=!1,console.log("ra1",this.radioitem)),1==e&&(this.radioitem[1].checked=!0,this.radioitem[0].checked=!1,console.log("ra2",this.radioitem))},carsclick:function(e){console.log("车辆类型",e),this.cars.value=e.value[0],this.cars.type=e.indexs[0],this.cars.show=!1,console.log(e.indexs[0])},addstartrangeconfirm:function(e){console.log("添加开始时间",e[0]),this.addstartrangeshow=!1,this.addstartrangevalue=e[0]},addendrangeconfirm:function(e){console.log("添加结束时间",e[0]),this.addendrangeshow=!1,this.addendrangevalue=e[0]},currentTime:function(){for(var e=new Date,t=e.getFullYear(),n=(e.getMonth(),[e.getMonth()+1,e.getDate()]),a=0;a<n.length;a++)n[a]>=1&&n[a]<=9&&(n[a]="0"+n[a]);var r=t+"/"+n[0]+"/"+n[1],i=(parseInt(n[0])+parseInt(this.monthspayment))%12,o=parseInt((parseInt(n[0])+parseInt(this.monthspayment))/12);i<9&&(i="0"+i),0==i&&(i=12);var s=t+o+"/"+i+"/"+n[1];this.addstartrangevalue=r,this.addendrangevalue=s},getDifferTime:function(){var e=new Date(Date.parse(this.addstartrangevalue.replace(/-/g,"/"))).getTime(),t=new Date(Date.parse(this.addendrangevalue.replace(/-/g,"/"))).getTime(),n=Math.abs(e-t)/864e5;return n},screenbtn:function(){console.log(this.edittype,"edittype"),console.log("11",JSON.parse(this.spacePrice));var t=JSON.parse(this.spacePrice),n=1==this.cartype?"m":"",a=this.cars.type+"_"+n+this.parentId+"_price";for(var r in console.log(a,"data"),t)if(console.log("key",r,a),r==a){if(console.log(t[r],"spacePrice每个月多少钱"),this.Price=t[r],this.moonPrice=this.Price/30,console.log(this.moonPrice,"moonPrice每天多少钱"),1==this.radioitem[1].checked){var i=this.getDifferTime();console.log("datatime 两个日期相隔天数",i),this.money=i*this.moonPrice,this.money=Math.floor(100*this.money)/100,console.log(this.money,"算两个日期所需要的钱"),""==this.edittype&&this.addcarMfees(),"true"==this.edittype&&this.editapi()}return 1==this.radioitem[0].checked&&(this.currentTime(),this.money=this.Price*this.monthspayment,this.money=Math.floor(100*this.money)/100,console.log(this.money,"算两个日期所需要的钱"),""==this.edittype&&this.addcarMfees(),"true"==this.edittype&&this.editapi()),void e.navigateTo({url:"./MonthlyfeeparkspaceManagement"})}},getcarPrice:function(){var e=this;return(0,i.default)(r.default.mark((function t(){var n,a;return r.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n={requestType:"GetCarPars",data:{}},t.next=3,(0,o.getMonthlycarPrice)(n);case 3:a=t.sent,console.log("获取车位价格",a.data.data[0].mfee_price_rule),e.spacePrice=a.data.data[0].mfee_price_rule;case 6:case"end":return t.stop()}}),t)})))()},editapi:function(){var e=this;return(0,i.default)(r.default.mark((function t(){var n,a;return r.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n={requestType:"UpCarMfee",data:{space_type:e.cartype,space_id:e.spaceId,carscan:e.licenseplate,start:e.addstartrangevalue,end:e.addendrangevalue,id:e.edit,space_parent_id:e.parentId,phone:e.phone,name:e.Carowner,idcard:e.ids,carty:e.cars.type,money:e.money}},t.next=3,(0,o.getMonthlycar)(n);case 3:a=t.sent,console.log("form",n),console.log("修改月费车位",a.data.data);case 6:case"end":return t.stop()}}),t)})))()},addcarMfees:function(){var e=this;return(0,i.default)(r.default.mark((function t(){var n,a;return r.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n={requestType:"AddCarMfee",data:{space_type:e.cartype,space_id:e.spaceId,carscan:e.licenseplate,start:e.addstartrangevalue,end:e.addendrangevalue,carty:e.cars.type,phone:e.phone,name:e.Carowner,idcard:e.ids,money:e.money,space_parent_id:e.parentId,ty:1}},t.next=3,(0,o.getMonthlycar)(n);case 3:a=t.sent,console.log("form",n),console.log("添加月费车位",a.data.data);case 6:case"end":return t.stop()}}),t)})))()}}};t.default=s}).call(this,n(2)["default"])},309:function(e,t,n){"use strict";n.r(t);var a=n(310),r=n.n(a);for(var i in a)["default"].indexOf(i)<0&&function(e){n.d(t,e,(function(){return a[e]}))}(i);t["default"]=r.a},310:function(e,t,n){}},[[303,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/homepages/MonthlyfeeparkspaceManagement/AddMonthlyfeeparkspace.js.map